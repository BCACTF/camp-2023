(()=>{let t=document.querySelector("h1");function e(){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.fillStyle="#656565",ctx.strokeStyle="white";for(let t=0;t<10;t++)for(let e=0;e<10;e++)killSquares.includes(`${t}:${e}`)?(ctx.fillStyle="#C63617",ctx.fillRect(i(t*xWidth),n(e*yWidth),i(xWidth),n(yWidth)),ctx.fillStyle="#656565"):ctx.fillRect(i(t*xWidth),n(e*yWidth),i(xWidth),n(yWidth)),ctx.strokeRect(i(t*xWidth),n(e*yWidth),i(xWidth),n(yWidth));ctx.beginPath(),ctx.fillStyle="white",ctx.arc(i(xWidth/2+xWidth*player.posX),n(yWidth/2+yWidth*player.posY),window.innerHeight>window.innerWidth?i(xWidth)/2:n(yWidth)/2,0,2*Math.PI),ctx.fill(),ctx.closePath()}function i(t){return window.innerWidth/1920*t}function n(t){return window.innerHeight/1080*t}canvas=document.querySelector("canvas"),canvas.height=window.innerHeight,canvas.width=window.innerWidth,ctx=canvas.getContext("2d"),player=new class{constructor(){this.posX=0,this.posY=0}},socket=io(),xWidth=192,yWidth=108,killSquares=[],e();let o=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];document.addEventListener("keydown",(function(i){if(o.includes(i.key)){let n={canvas,ctx,player:{posX:player.posX,posY:player.posY},recentKey:""};n.recentKey=o.indexOf(i.key),function(i){socket.emit("move",i,(i=>{i.flag&&(t.style.display="block",canvas.style.display="none",t.textContent=i.flag),i.killSquares.forEach((t=>{!function(t){killSquares.push(t)}(t)})),player.posX=i.position.x,player.posY=i.position.y,i.death&&location.reload(),e()}))}(n)}})),window.addEventListener("resize",(()=>{canvas.width=window.innerWidth,canvas.height=window.innerHeight,e()}))})();